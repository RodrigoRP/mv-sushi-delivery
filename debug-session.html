<!DOCTYPE html>
<html>
<head>
    <title>Debug Sess√£o Admin</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üîç Debug Sess√£o Admin - MV Sushi</h1>
    
    <div class="info">
        <strong>Instru√ß√µes:</strong><br>
        1. Fa√ßa login no admin (localhost:3000/admin)<br>
        2. Volte aqui e clique em "Verificar Sess√£o"<br>
        3. Atualize a p√°gina admin e veja se mant√©m o login
    </div>
    
    <div id="status"></div>
    
    <button onclick="checkSession()">üîç Verificar Sess√£o</button>
    <button onclick="setTestSession()">‚úÖ Definir Sess√£o Teste</button>
    <button onclick="clearSession()">‚ùå Limpar Sess√£o</button>
    <button onclick="openAdmin()">üîó Abrir Admin</button>
    
    <div id="details"></div>
    
    <script>
        function checkSession() {
            const session = localStorage.getItem('mvSushiAdminSession');
            const status = document.getElementById('status');
            const details = document.getElementById('details');
            
            console.log('üîç Verificando sess√£o:', session);
            
            if (session === 'true') {
                status.innerHTML = '<div class="success">‚úÖ SESS√ÉO ATIVA - Admin logado</div>';
            } else if (session === 'false') {
                status.innerHTML = '<div class="error">‚ùå SESS√ÉO INATIVA - Admin deslogado</div>';
            } else if (session === null) {
                status.innerHTML = '<div class="error">‚ùå NENHUMA SESS√ÉO - Nunca fez login</div>';
            } else {
                status.innerHTML = '<div class="error">‚ùì SESS√ÉO INV√ÅLIDA - Valor: ' + session + '</div>';
            }
            
            details.innerHTML = `
                <h3>Detalhes T√©cnicos:</h3>
                <ul>
                    <li><strong>Valor no localStorage:</strong> "${session}"</li>
                    <li><strong>Tipo:</strong> ${typeof session}</li>
                    <li><strong>Compara√ß√£o === 'true':</strong> ${session === 'true'}</li>
                    <li><strong>URL atual:</strong> ${window.location.href}</li>
                    <li><strong>Timestamp:</strong> ${new Date().toLocaleString()}</li>
                </ul>
            `;
        }
        
        function setTestSession() {
            localStorage.setItem('mvSushiAdminSession', 'true');
            console.log('‚úÖ Sess√£o definida manualmente');
            checkSession();
        }
        
        function clearSession() {
            localStorage.removeItem('mvSushiAdminSession');
            console.log('‚ùå Sess√£o removida');
            checkSession();
        }
        
        function openAdmin() {
            window.open('http://localhost:3000/admin', '_blank');
        }
        
        // Auto-verificar ao carregar
        checkSession();
        
        // Verificar a cada 2 segundos
        setInterval(checkSession, 2000);
    </script>
</body>
</html>